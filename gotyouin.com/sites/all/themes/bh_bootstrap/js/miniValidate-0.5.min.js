 jQuery.fn.miniValidate=function(callback){"use strict";jQuery("input").blur(function(){jQuery(this).val(jQuery.trim(jQuery(this).val()));});jQuery(window).bind("unload",function(){jQuery("div.region-content").css({opacity:1 });});var emptyError="<p class='error-message empty-message'>Required</p>";var emailError="<p class='error-message email-message'>Invalid email</p>";var numberError="<p class='error-message number-message'>Numbers only</p>";var currencyError="<p class='error-message currency-message'>Numbers and decimal only</p>";var urlMessage="<p class='error-message url-message'>Invalid URL</p>";var textareaError="<p class='error-message empty-message'>Required</p>";var phoneError="<p class='error-message phone-message'>Invalid Phone Number</p>";var zipcodeError="<p class='error-message zipcode-message'>Invalid Zipcode</p>";var emailRegEx=/^([A-Za-z0-9_\-\.\+\!#=\$%\&])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;var numberRegEx=/^[0-9]+$/;var urlRegEx=/^(https?:\/\/)?([\da-zA-Z\.-]+)\.([A-Za-z\.]{2,6})\/([A-Za-z0-9]+)/;var zipcodeRegEx= /^[0-9]{5}$/;var phoneRegEx=/^[0-9]{3}[- ]?[0-9]{3}[- ]?[0-9]{4}$/;var currencyRegEx=/^([0-9]+)\.?([0-9]{1,2})?$/;var vEmpty=jQuery(".validateEmpty");var vZipcode=jQuery("input.validateZipcode");var vZipcodeOpt=jQuery("input.validateZipcodeOptional");var vPhone=jQuery("input.validatePhone");var vPhoneOpt=jQuery("input.validatePhoneOptional");var vEmail=jQuery("input.validateEmail");var vEmailOpt=jQuery("input.validateEmailOptional");var vNumber=jQuery("input.validateNumber");var vNumberOpt=jQuery("input.validateNumberOptional");var vCurrency=jQuery("input.validateCurrency");var vCurrencyOpt=jQuery("input.validateCurrencyOptional");var vUrl=jQuery("input.validateUrl");var vUrlOpt=jQuery("input.validateUrlOptional");var vTextarea=jQuery("textarea.validateTextarea");var i;jQuery(this).submit(function(){jQuery("#busy").hide();jQuery("div.region-content").css({opacity:1});if (typeof callback === 'function'){var _return=callback();if (_return === false) return false;} var isClean=true,focused=false;var form_length=jQuery(":input").length - 1;jQuery('.error-message').remove();for (i=0;i < form_length;i++){if (jQuery(vEmpty[i]).length){if (jQuery(vEmpty[i]).val() === ''){jQuery(vEmpty[i]).addClass('error');jQuery(vEmpty[i]).before(emptyError);if (! focused){jQuery(vEmpty[i]).focus();focused=true;} isClean=false;} else{jQuery(vEmpty[i]).removeClass('error');} } if (jQuery(vPhone[i]).length){if(!phoneRegEx.test(jQuery(vPhone[i]).val())){jQuery(vPhone[i]).addClass('error');jQuery(vPhone[i]).before(phoneError);if (! focused){jQuery(vPhone[i]).focus();focused=true;} isClean=false;} else jQuery(vPhone[i]).removeClass('error');} if (jQuery(vPhoneOpt[i]).length){if (jQuery(vPhoneOpt[i]).val() === ''){} else if(!phoneRegEx.test(jQuery(vPhoneOpt[i]).val())){jQuery(vPhoneOpt[i]).addClass('error');jQuery(vPhoneOpt[i]).before(phoneError);if (! focused){jQuery(vPhoneOpt[i]).focus();focused=true;} isClean=false;} else jQuery(vPhoneOpt[i]).removeClass('error');} if (jQuery(vEmail[i]).length){if(!emailRegEx.test(jQuery(vEmail[i]).val())){jQuery(vEmail[i]).addClass('error');jQuery(vEmail[i]).before(emailError);if (! focused){jQuery(vEmail[i]).focus();focused=true;} isClean=false;} else jQuery(vEmail[i]).removeClass('error');} if (jQuery(vEmailOpt[i]).length){if (jQuery(vEmailOpt[i]).val() === ''){} else if(!emailRegEx.test(vEmailOpt.val())){jQuery(vEmailOpt[i]).addClass('error');jQuery(vEmailOpt[i]).before(emailError);if (! focused){jQuery(vEmptyOpt[i]).focus();focused=true;} isClean=false;} else jQuery(vEmailOpt[i]).removeClass('error');} if (jQuery(vZipcode[i]).length){if(!zipcodeRegEx.test(jQuery(vZipcode[i]).val())){jQuery(vZipcode[i]).addClass('error');jQuery(vZipcode[i]).before(zipcodeError);if (! focused){jQuery(vZipcode[i]).focus();focused=true;} isClean=false;} else jQuery(vZipcode[i]).removeClass('error');} if (jQuery(vZipcodeOpt[i]).length){if (jQuery(vZipcodeOpt[i]).val() === ''){} else if(!zipcodeRegEx.test(jQuery(vZipcodeOpt[i]).val())){jQuery(vZipcodeOpt[i]).addClass('error');jQuery(vZipcodeOpt[i]).before(zipcodeError);if (! focused){jQuery(vZipcodeOpt[i]).focus();focused=true;} isClean=false;} else jQuery(vZipcodeOpt[i]).removeClass('error');} if (jQuery(vNumber[i]).length){if(!numberRegEx.test(jQuery(vNumber[i]).val())){jQuery(vNumber[i]).addClass('error');jQuery(vNumber[i]).before(numberError);if (! focused){jQuery(vNumber[i]).focus();focused=true;} isClean=false;} else jQuery(vNumber[i]).removeClass('error');} if (jQuery(vNumberOpt[i]).length){if (jQuery(vNumberOpt[i]).val() === ''){} else if(!numberRegEx.test(jQuery(vNumberOpt[i]).val())){jQuery(vNumberOpt[i]).addClass('error');jQuery(vNumberOpt[i]).before(numberError);if (! focused){jQuery(vNumberOpt[i]).focus();focused=true;} isClean=false;} else jQuery(vNumberOpt[i]).removeClass('error');} if (jQuery(vCurrency[i]).length){if(!currencyRegEx.test(jQuery(vCurrency[i]).val())){jQuery(vCurrency[i]).addClass('error');jQuery(vCurrency[i]).before(currencyError);if (! focused){jQuery(vCurrency[i]).focus();focused=true;} isClean=false;} else jQuery(vCurrency[i]).removeClass('error');} if (jQuery(vCurrencyOpt[i]).length){if (jQuery(vCurrencyOpt[i]).val() === ''){} else if(!currencyRegEx.test(jQuery(vCurrencyOpt[i]).val())){jQuery(vCurrencyOpt[i]).addClass('error');jQuery(vCurrencyOpt[i]).before(currencyError);if (! focused){jQuery(vCurrencyOpt[i]).focus();focused=true;} isClean=false;} else jQuery(vCurrencyOpt[i]).removeClass('error');} if (jQuery(vUrl[i]).length){if(!urlRegEx.test(jQuery(vUrl[i]).val())){jQuery(vUrl[i]).addClass('error');jQuery(vUrl[i]).before(urlMessage);if (! focused){jQuery(vUrl[i]).focus();focused=true;} isClean=false;} else jQuery(vUrl[i]).removeClass('error');} if (jQuery(vUrlOpt[i]).length){if (jQuery(vUrlOpt[i]).val() === ''){} else if(!urlRegEx.test(jQuery(vUrlOpt[i]).val())){jQuery(vUrlOpt[i]).addClass('error');jQuery(vUrlOpt[i]).before(urlMessage);if (! focused){jQuery(vUrlOpt[i]).focus();focused=true;} isClean=false;} else jQuery(vUrlOpt[i]).removeClass('error');} if (jQuery(vTextarea[i]).length){if (jQuery(vTextarea[i]).val() ===''){jQuery(vTextarea[i]).addClass('error');jQuery(vTextarea[i]).before(textareaError);if (! focused){jQuery(vTextarea[i]).focus();focused=true;} isClean=false;} else jQuery(vTextarea[i]).removeClass('error');} } if (isClean){jQuery('#busy').show();jQuery("div.region-content").css({opacity:.4 });} else{jQuery('#busy').hide();jQuery("div.region-content").css({opacity:1 });} return isClean;});};